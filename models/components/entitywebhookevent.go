// Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.

package components

import (
	"errors"
	"fmt"
	"github.com/mollie/mollie-api-golang/internal/utils"
)

// EntityWebhookEventWebhookEventTypes - The event's type
type EntityWebhookEventWebhookEventTypes string

const (
	EntityWebhookEventWebhookEventTypesPaymentLinkPaid           EntityWebhookEventWebhookEventTypes = "payment-link.paid"
	EntityWebhookEventWebhookEventTypesBalanceTransactionCreated EntityWebhookEventWebhookEventTypes = "balance-transaction.created"
	EntityWebhookEventWebhookEventTypesSalesInvoiceCreated       EntityWebhookEventWebhookEventTypes = "sales-invoice.created"
	EntityWebhookEventWebhookEventTypesSalesInvoiceIssued        EntityWebhookEventWebhookEventTypes = "sales-invoice.issued"
	EntityWebhookEventWebhookEventTypesSalesInvoiceCanceled      EntityWebhookEventWebhookEventTypes = "sales-invoice.canceled"
	EntityWebhookEventWebhookEventTypesSalesInvoicePaid          EntityWebhookEventWebhookEventTypes = "sales-invoice.paid"
	EntityWebhookEventWebhookEventTypesWildcard                  EntityWebhookEventWebhookEventTypes = "*"
)

func (e EntityWebhookEventWebhookEventTypes) ToPointer() *EntityWebhookEventWebhookEventTypes {
	return &e
}

type EntityType string

const (
	EntityTypePaymentLinkResponse EntityType = "payment-link-response"
	EntityTypeProfileResponse     EntityType = "profile-response"
)

type Entity struct {
	PaymentLinkResponse *PaymentLinkResponse `queryParam:"inline,name=entity"`
	ProfileResponse     *ProfileResponse     `queryParam:"inline,name=entity"`

	Type EntityType
}

func CreateEntityPaymentLinkResponse(paymentLinkResponse PaymentLinkResponse) Entity {
	typ := EntityTypePaymentLinkResponse

	return Entity{
		PaymentLinkResponse: &paymentLinkResponse,
		Type:                typ,
	}
}

func CreateEntityProfileResponse(profileResponse ProfileResponse) Entity {
	typ := EntityTypeProfileResponse

	return Entity{
		ProfileResponse: &profileResponse,
		Type:            typ,
	}
}

func (u *Entity) UnmarshalJSON(data []byte) error {

	var paymentLinkResponse PaymentLinkResponse = PaymentLinkResponse{}
	if err := utils.UnmarshalJSON(data, &paymentLinkResponse, "", true, nil); err == nil {
		u.PaymentLinkResponse = &paymentLinkResponse
		u.Type = EntityTypePaymentLinkResponse
		return nil
	}

	var profileResponse ProfileResponse = ProfileResponse{}
	if err := utils.UnmarshalJSON(data, &profileResponse, "", true, nil); err == nil {
		u.ProfileResponse = &profileResponse
		u.Type = EntityTypeProfileResponse
		return nil
	}

	return fmt.Errorf("could not unmarshal `%s` into any supported union types for Entity", string(data))
}

func (u Entity) MarshalJSON() ([]byte, error) {
	if u.PaymentLinkResponse != nil {
		return utils.MarshalJSON(u.PaymentLinkResponse, "", true)
	}

	if u.ProfileResponse != nil {
		return utils.MarshalJSON(u.ProfileResponse, "", true)
	}

	return nil, errors.New("could not marshal union type Entity: all fields are null")
}

// Embedded - Full payload of the event.
type Embedded struct {
	Entity *Entity `json:"entity,omitempty"`
}

func (e *Embedded) GetEntity() *Entity {
	if e == nil {
		return nil
	}
	return e.Entity
}

// EntityWebhookEventLinks - An object with several relevant URLs. Every URL object will contain an `href` and a `type` field.
type EntityWebhookEventLinks struct {
	// In v2 endpoints, URLs are commonly represented as objects with an `href` and `type` field.
	Self URLObj `json:"self"`
	// In v2 endpoints, URLs are commonly represented as objects with an `href` and `type` field.
	Documentation URLObj `json:"documentation"`
	// In v2 endpoints, URLs are commonly represented as objects with an `href` and `type` field.
	Entity *URLObj `json:"entity,omitempty"`
}

func (e *EntityWebhookEventLinks) GetSelf() URLObj {
	if e == nil {
		return URLObj{}
	}
	return e.Self
}

func (e *EntityWebhookEventLinks) GetDocumentation() URLObj {
	if e == nil {
		return URLObj{}
	}
	return e.Documentation
}

func (e *EntityWebhookEventLinks) GetEntity() *URLObj {
	if e == nil {
		return nil
	}
	return e.Entity
}

type EntityWebhookEvent struct {
	// Indicates the response contains a webhook event object. Will always contain the string `event` for this endpoint.
	Resource string `json:"resource"`
	// The identifier uniquely referring to this event.
	ID                string                              `json:"id"`
	WebhookEventTypes EntityWebhookEventWebhookEventTypes `json:"type"`
	// The entity token that triggered the event
	EntityID string `json:"entityId"`
	// The event's date time of creation.
	CreatedAt string `json:"createdAt"`
	// Full payload of the event.
	Embedded *Embedded `json:"_embedded,omitempty"`
	// An object with several relevant URLs. Every URL object will contain an `href` and a `type` field.
	Links EntityWebhookEventLinks `json:"_links"`
}

func (e *EntityWebhookEvent) GetResource() string {
	if e == nil {
		return ""
	}
	return e.Resource
}

func (e *EntityWebhookEvent) GetID() string {
	if e == nil {
		return ""
	}
	return e.ID
}

func (e *EntityWebhookEvent) GetWebhookEventTypes() EntityWebhookEventWebhookEventTypes {
	if e == nil {
		return EntityWebhookEventWebhookEventTypes("")
	}
	return e.WebhookEventTypes
}

func (e *EntityWebhookEvent) GetEntityID() string {
	if e == nil {
		return ""
	}
	return e.EntityID
}

func (e *EntityWebhookEvent) GetCreatedAt() string {
	if e == nil {
		return ""
	}
	return e.CreatedAt
}

func (e *EntityWebhookEvent) GetEmbedded() *Embedded {
	if e == nil {
		return nil
	}
	return e.Embedded
}

func (e *EntityWebhookEvent) GetLinks() EntityWebhookEventLinks {
	if e == nil {
		return EntityWebhookEventLinks{}
	}
	return e.Links
}
